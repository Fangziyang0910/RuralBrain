# RuralBrain å‰ç«¯å±•ç¤ºç³»ç»Ÿ

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ RuralBrain çš„å‰ç«¯å±•ç¤ºç³»ç»Ÿï¼Œæä¾›ç®€æ´ç°ä»£çš„å¯¹è¯ç•Œé¢ï¼Œæ”¯æŒå›¾åƒä¸Šä¼ å’Œæ™ºèƒ½å¯¹è¯ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

- âœ… ç®€æ´ç°ä»£çš„å¯¹è¯ç•Œé¢ï¼ˆç±»ä¼¼ ChatGPT/DeepSeekï¼‰
- âœ… æ”¯æŒå›¾ç‰‡ä¸Šä¼ 
- âœ… æµå¼è¾“å‡ºå¯¹è¯å†…å®¹
- âœ… é›†æˆå®³è™«è¯†åˆ«ã€å¤§ç±³å“ç§è¯†åˆ«ã€ç‰›åªè¯†åˆ«åŠŸèƒ½
- âœ… Markdown æ¸²æŸ“æ”¯æŒ

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
RuralBrain/
â”œâ”€â”€ service/                 # åç«¯æœåŠ¡å±‚
â”‚   â”œâ”€â”€ server.py           # FastAPI æœåŠ¡å™¨
â”‚   â”œâ”€â”€ schemas.py          # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ settings.py         # é…ç½®æ–‡ä»¶
â”œâ”€â”€ frontend/               # å‰ç«¯åº”ç”¨
â”‚   â””â”€â”€ my-app/            # Next.js åº”ç”¨
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ app/       # é¡µé¢
â”‚       â”‚   â”œâ”€â”€ components/# ç»„ä»¶
â”‚       â”‚   â””â”€â”€ utils/     # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ package.json
â”œâ”€â”€ uploads/                # å›¾ç‰‡ä¸Šä¼ ç›®å½•
â”œâ”€â”€ run_server.py          # åç«¯å¯åŠ¨è„šæœ¬
â””â”€â”€ run_frontend.bat/ps1   # å‰ç«¯å¯åŠ¨è„šæœ¬
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Python 3.13+
- Node.js 18+
- uv (Python åŒ…ç®¡ç†å™¨)

### 2. å¯åŠ¨åç«¯æœåŠ¡

```bash
# ä½¿ç”¨ uv å¯åŠ¨ï¼ˆæ¨èï¼‰
uv run run_server.py

# æˆ–ä½¿ç”¨ Python
python run_server.py
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:8080` å¯åŠ¨

### 3. å¯åŠ¨å‰ç«¯æœåŠ¡

**Windows (PowerShell):**
```powershell
.\run_frontend.ps1
```

**Windows (CMD):**
```cmd
run_frontend.bat
```

**æ‰‹åŠ¨å¯åŠ¨:**
```bash
cd frontend/my-app
npm install  # é¦–æ¬¡è¿è¡Œéœ€è¦å®‰è£…ä¾èµ–
npm run dev
```

å‰ç«¯æœåŠ¡å°†åœ¨ `http://localhost:3000` å¯åŠ¨

### 4. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://localhost:3000`

## ğŸ“– ä½¿ç”¨è¯´æ˜

### åŸºæœ¬å¯¹è¯

1. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥é—®é¢˜
2. æŒ‰ Enter å‘é€ï¼ŒShift+Enter æ¢è¡Œ
3. ç­‰å¾… AI åŠ©æ‰‹æµå¼å›å¤

### å›¾ç‰‡è¯†åˆ«

1. ç‚¹å‡»ä¸Šä¼ æŒ‰é’®é€‰æ‹©å›¾ç‰‡
2. è¾“å…¥ç›¸å…³é—®é¢˜ï¼ˆå¦‚"å¸®æˆ‘è¯†åˆ«è¿™å¼ å›¾ç‰‡ä¸­çš„å®³è™«"ï¼‰
3. å‘é€æ¶ˆæ¯
4. AI ä¼šè‡ªåŠ¨åˆ¤æ–­å¹¶è°ƒç”¨ç›¸åº”çš„è¯†åˆ«å·¥å…·

### æ”¯æŒçš„è¯†åˆ«ç±»å‹

- **å®³è™«è¯†åˆ«**: ä¸Šä¼ å†œä½œç‰©ç—…è™«å®³å›¾ç‰‡
- **å¤§ç±³å“ç§è¯†åˆ«**: ä¸Šä¼ å¤§ç±³å›¾ç‰‡
- **ç‰›åªè¯†åˆ«**: ä¸Šä¼ ç‰›çš„å›¾ç‰‡

## ğŸ”§ æŠ€æœ¯æ ˆ

### åç«¯
- FastAPI: Web æ¡†æ¶
- LangChain: AI Agent æ¡†æ¶
- LangGraph: Agent å·¥ä½œæµ
- Uvicorn: ASGI æœåŠ¡å™¨

### å‰ç«¯
- Next.js 14: React æ¡†æ¶
- TypeScript: ç±»å‹å®‰å…¨
- TailwindCSS: æ ·å¼æ¡†æ¶
- React Markdown: Markdown æ¸²æŸ“
- Lucide React: å›¾æ ‡åº“

## ğŸ¨ ç•Œé¢é¢„è§ˆ

- æ¸…çˆ½ç®€æ´çš„å¯¹è¯ç•Œé¢
- æµç•…çš„æµå¼è¾“å‡ºæ•ˆæœ
- æ”¯æŒå›¾ç‰‡é¢„è§ˆå’Œå±•ç¤º
- Markdown æ ¼å¼æ¸²æŸ“

## ğŸ” API æ¥å£

### ä¸Šä¼ å›¾ç‰‡
```
POST /upload
Content-Type: multipart/form-data

Response:
{
  "success": true,
  "file_path": "path/to/file",
  "message": "ä¸Šä¼ æˆåŠŸ"
}
```

### æµå¼å¯¹è¯
```
POST /chat/stream
Content-Type: application/json

Body:
{
  "message": "ç”¨æˆ·æ¶ˆæ¯",
  "image_path": "å¯é€‰çš„å›¾ç‰‡è·¯å¾„",
  "thread_id": "å¯é€‰çš„å¯¹è¯çº¿ç¨‹ID"
}

Response: text/event-stream (SSE)
```

## ğŸ“ å¼€å‘è¯´æ˜

### æ·»åŠ æ–°åŠŸèƒ½

1. åç«¯: åœ¨ `service/server.py` ä¸­æ·»åŠ æ–°çš„è·¯ç”±
2. å‰ç«¯: åœ¨ `src/components/` ä¸­åˆ›å»ºæ–°ç»„ä»¶
3. éµå¾ªé¡¹ç›®ä»£ç è§„èŒƒï¼ˆå‚è€ƒ `é¡¹ç›®ç»„ç»‡ç»“æ„.md`ï¼‰

### è°ƒè¯•

- åç«¯æ—¥å¿—: æŸ¥çœ‹ç»ˆç«¯è¾“å‡º
- å‰ç«¯è°ƒè¯•: ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·
- API æµ‹è¯•: è®¿é—® `http://localhost:8080/docs` æŸ¥çœ‹ Swagger æ–‡æ¡£

## ğŸ› å¸¸è§é—®é¢˜

### ç«¯å£è¢«å ç”¨

ä¿®æ”¹ `service/settings.py` ä¸­çš„ `PORT` é…ç½®ï¼Œæˆ–è®¾ç½®ç¯å¢ƒå˜é‡:
```bash
export PORT=8081  # Linux/Mac
set PORT=8081     # Windows
```

### å›¾ç‰‡ä¸Šä¼ å¤±è´¥

- æ£€æŸ¥å›¾ç‰‡å¤§å°æ˜¯å¦è¶…è¿‡ 10MB
- ç¡®è®¤å›¾ç‰‡æ ¼å¼æ˜¯å¦æ”¯æŒ (jpg, png, bmp, webp)
- æ£€æŸ¥ `uploads/` ç›®å½•æ˜¯å¦æœ‰å†™å…¥æƒé™

### å‰ç«¯æ— æ³•è¿æ¥åç«¯

æ£€æŸ¥ `frontend/my-app/next.config.mjs` ä¸­çš„ä»£ç†é…ç½®æ˜¯å¦æ­£ç¡®